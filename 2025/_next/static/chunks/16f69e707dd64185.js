(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87035,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return u}});let u=e=>{}},13080,e=>{"use strict";var t=e.i(96241),r=e.i(78042),u=e.i(29619),n=e.i(45456);let a=(0,n.createContext)(void 0);function i({children:e}){let[i,l]=(0,n.useState)(!0),[s,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),h=async()=>{l(!0);let e=t.default.env.NEXT_PUBLIC_ZHIHU_COOKIE;e&&e.split(";").forEach(e=>document.cookie=e+"; path=/");try{let e=await (0,u.authRequest)({method:"get",url:"/me"});d(e),o(!0)}catch{o(!1),d(null)}finally{l(!1)}};return(0,n.useEffect)(()=>{h()},[]),(0,r.jsx)(a.Provider,{value:{isAuthLoading:i,isAuthenticated:s,profile:c,clear:()=>{d(null),o(!1)},fetchProfile:h,login:()=>{window.location.href=`https://www.zhihu.com/signin?next=${encodeURIComponent(window.location.href)}`}},children:e})}function l(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}e.s(["AuthProvider",()=>i,"useAuth",()=>l])},3161,e=>{"use strict";var t=e.i(78042),r=e.i(45456),u=e.i(13080),n=e.i(29619);let a=(0,r.createContext)(void 0);function i({children:e}){let{isAuthenticated:i,isAuthLoading:l}=(0,u.useAuth)(),[s,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),v=(0,r.useCallback)(async()=>{if(i){d(!0),f(null);try{let e=await (0,n.default)({url:"/campaigns/user/address",method:"get"}),t=await (0,n.default)({url:"/campaigns/user/1974495708519367443",method:"get"});o({address:e,pointsTask:t})}catch(e){console.error("Error fetching user data:",e),f(e instanceof Error?e.message:"获取数据失败，请稍后重试")}finally{d(!1)}}},[i]);(0,r.useEffect)(()=>{i&&!l?v():i||(o(null),f(null))},[i,l,v]);let m=(0,r.useCallback)(()=>{f(null)},[]);return(0,t.jsx)(a.Provider,{value:{userData:s,isLoadingData:c,error:h,fetchUserData:v,clearError:m},children:e})}function l(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useUserData must be used within a UserDataProvider");return e}e.s(["UserDataProvider",()=>i,"useUserData",()=>l])}]);