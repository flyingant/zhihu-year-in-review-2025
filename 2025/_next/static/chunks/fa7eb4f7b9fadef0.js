(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13080,e=>{"use strict";var t=e.i(96241),r=e.i(78042),u=e.i(29619),a=e.i(45456);let i=(0,a.createContext)(void 0);function n({children:e}){let[n,s]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),h=async()=>{s(!0);let e=t.default.env.NEXT_PUBLIC_ZHIHU_COOKIE;e&&e.split(";").forEach(e=>document.cookie=e+"; path=/");try{let e=await (0,u.authRequest)({method:"get",url:"/me"});d(e),o(!0)}catch{o(!1),d(null)}finally{s(!1)}};return(0,a.useEffect)(()=>{h()},[]),(0,r.jsx)(i.Provider,{value:{isAuthLoading:n,isAuthenticated:l,profile:c,clear:()=>{d(null),o(!1)},fetchProfile:h,login:()=>{window.location.href=`https://www.zhihu.com/signin?next=${encodeURIComponent(window.location.href)}`}},children:e})}function s(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}e.s(["AuthProvider",()=>n,"useAuth",()=>s])},3161,e=>{"use strict";var t=e.i(78042),r=e.i(45456),u=e.i(13080),a=e.i(29619);let i=(0,r.createContext)(void 0);function n({children:e}){let{isAuthenticated:n,isAuthLoading:s}=(0,u.useAuth)(),[l,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),v=(0,r.useCallback)(async()=>{if(n){d(!0),f(null);try{let e=await (0,a.default)({url:"/campaigns/user/address",method:"get"}),t=await (0,a.default)({url:"/campaigns/user/1974495708519367443",method:"get"});o({address:e,pointsTask:t})}catch(e){console.error("Error fetching user data:",e),f(e instanceof Error?e.message:"获取数据失败，请稍后重试")}finally{d(!1)}}},[n]);(0,r.useEffect)(()=>{n&&!s?v():n||(o(null),f(null))},[n,s,v]);let m=(0,r.useCallback)(()=>{f(null)},[]);return(0,t.jsx)(i.Provider,{value:{userData:l,isLoadingData:c,error:h,fetchUserData:v,clearError:m},children:e})}function s(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useUserData must be used within a UserDataProvider");return e}e.s(["UserDataProvider",()=>n,"useUserData",()=>s])}]);